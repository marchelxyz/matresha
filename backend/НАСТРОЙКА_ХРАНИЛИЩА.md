# –ë—ã—Å—Ç—Ä–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ Yandex Object Storage

## –®–∞–≥ 1: –ü–æ–ª—É—á–µ–Ω–∏–µ –∫–ª—é—á–µ–π –¥–æ—Å—Ç—É–ø–∞

1. –ó–∞–π–¥–∏—Ç–µ –Ω–∞ [Yandex Cloud Console](https://console.yandex.cloud/)
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **IAM** ‚Üí **–°–µ—Ä–≤–∏—Å–Ω—ã–µ –∞–∫–∫–∞—É–Ω—Ç—ã**
3. –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π —Å–µ—Ä–≤–∏—Å–Ω—ã–π –∞–∫–∫–∞—É–Ω—Ç (–Ω–∞–ø—Ä–∏–º–µ—Ä, `storage-service`)
4. –ù–∞–∑–Ω–∞—á—å—Ç–µ —Ä–æ–ª—å **storage.editor** –∏–ª–∏ **editor**
5. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **IAM** ‚Üí **–ö–ª—é—á–∏** ‚Üí –≤—ã–±–µ—Ä–∏—Ç–µ –≤–∞—à —Å–µ—Ä–≤–∏—Å–Ω—ã–π –∞–∫–∫–∞—É–Ω—Ç
6. –°–æ–∑–¥–∞–π—Ç–µ **–°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π –∫–ª—é—á –¥–æ—Å—Ç—É–ø–∞**
7. **–í–ê–ñ–ù–û**: –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ `Access Key ID` –∏ `Secret Access Key` (–ø–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —Ä–∞–∑!)

## –®–∞–≥ 2: –°–æ–∑–¥–∞–Ω–∏–µ –±–∞–∫–µ—Ç–∞

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **Object Storage** ‚Üí **–ë–∞–∫–µ—Ç—ã**
2. –ù–∞–∂–º–∏—Ç–µ **–°–æ–∑–¥–∞—Ç—å –±–∞–∫–µ—Ç**
3. –£–∫–∞–∂–∏—Ç–µ:
   - **–ò–º—è –±–∞–∫–µ—Ç–∞**: –Ω–∞–ø—Ä–∏–º–µ—Ä, `ai-assistant-files` (–¥–æ–ª–∂–Ω–æ –±—ã—Ç—å —É–Ω–∏–∫–∞–ª—å–Ω—ã–º)
   - **–†–µ–≥–∏–æ–Ω**: `ru-central1`
   - **–¢–∏–ø –¥–æ—Å—Ç—É–ø–∞**: `–ü—Ä–∏–≤–∞—Ç–Ω—ã–π` (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
4. –ù–∞–∂–º–∏—Ç–µ **–°–æ–∑–¥–∞—Ç—å –±–∞–∫–µ—Ç**

## –®–∞–≥ 3: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è

### –î–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏:

```bash
cd backend
cp .env.example .env
```

–ó–∞—Ç–µ–º –æ—Ç–∫—Ä–æ–π—Ç–µ `.env` –∏ –∑–∞–ø–æ–ª–Ω–∏—Ç–µ:

```env
YANDEX_STORAGE_ENDPOINT=https://storage.yandexcloud.net
YANDEX_STORAGE_ACCESS_KEY=–≤–∞—à-access-key-id-–∑–¥–µ—Å—å
YANDEX_STORAGE_SECRET_KEY=–≤–∞—à-secret-access-key-–∑–¥–µ—Å—å
YANDEX_STORAGE_BUCKET=–∏–º—è-–≤–∞—à–µ–≥–æ-–±–∞–∫–µ—Ç–∞
YANDEX_STORAGE_REGION=ru-central1
```

### –î–ª—è Railway (–ø—Ä–æ–¥–∞–∫—à–µ–Ω):

1. –û—Ç–∫—Ä–æ–π—Ç–µ –≤–∞—à –ø—Ä–æ–µ–∫—Ç –Ω–∞ Railway
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **Variables**
3. –î–æ–±–∞–≤—å—Ç–µ –≤—Å–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∏–∑ —Å–ø–∏—Å–∫–∞ –≤—ã—à–µ

### –î–ª—è Vercel (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ):

1. –û—Ç–∫—Ä–æ–π—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–æ–µ–∫—Ç–∞
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **Environment Variables**
3. –î–æ–±–∞–≤—å—Ç–µ –≤—Å–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ

## –®–∞–≥ 4: –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è

–ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–∫—Ä–∏–ø—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏:

```bash
cd backend
python3 test_yandex_storage.py
```

–ï—Å–ª–∏ –≤—Å–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ, –≤—ã —É–≤–∏–¥–∏—Ç–µ:
```
‚úì –í–°–ï –ü–†–û–í–ï–†–ö–ò –ü–†–û–ô–î–ï–ù–´ –£–°–ü–ï–®–ù–û!
  Yandex Object Storage –≥–æ—Ç–æ–≤ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é
```

## –ß—Ç–æ –¥–∞–ª—å—à–µ?

–ü–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤—Å–µ –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã –±—É–¥—É—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
- ‚úÖ –°–æ—Ö—Ä–∞–Ω—è—Ç—å—Å—è –≤ Yandex Object Storage
- ‚úÖ –û—Ä–≥–∞–Ω–∏–∑–æ–≤—ã–≤–∞—Ç—å—Å—è –ø–æ –ø–∞–ø–∫–∞–º –∏ –¥–∞—Ç–∞–º
- ‚úÖ –ü–æ–ª—É—á–∞—Ç—å –≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Å—Å—ã–ª–∫–∏ (–¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã 7 –¥–Ω–µ–π)

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ö—Ä–∞–Ω–µ–Ω–∏—è

–§–∞–π–ª—ã —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è —Ç–∞–∫:
```
–≤–∞—à-–±–∞–∫–µ—Ç/
  ‚îî‚îÄ‚îÄ chat-files/
      ‚îî‚îÄ‚îÄ 2024/
          ‚îî‚îÄ‚îÄ 01/
              ‚îî‚îÄ‚îÄ 15/
                  ‚îî‚îÄ‚îÄ uuid-filename.ext
```

## –û—Ç–∫–ª—é—á–µ–Ω–∏–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞

–ï—Å–ª–∏ –Ω–µ —Ö–æ—Ç–∏—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ–±–ª–∞—á–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ, –ø—Ä–æ—Å—Ç–æ –Ω–µ –∑–∞–ø–æ–ª–Ω—è–π—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è. –§–∞–π–ª—ã –±—É–¥—É—Ç –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å—Å—è –≤ –ø–∞–º—è—Ç–∏ —Å–µ—Ä–≤–µ—Ä–∞.

## –ü—Ä–æ–±–ª–µ–º—ã?

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –≤—Å–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã: `python3 test_yandex_storage.py`
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –∫–ª—é—á–∏ –¥–æ—Å—Ç—É–ø–∞ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –±–∞–∫–µ—Ç —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –∏ –¥–æ—Å—Ç—É–ø–µ–Ω
4. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —É —Å–µ—Ä–≤–∏—Å–Ω–æ–≥–æ –∞–∫–∫–∞—É–Ω—Ç–∞ –µ—Å—Ç—å –ø—Ä–∞–≤–∞ –Ω–∞ —Ä–∞–±–æ—Ç—É —Å –±–∞–∫–µ—Ç–æ–º

## –ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏

- üìñ [–ü–æ–¥—Ä–æ–±–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è](YANDEX_STORAGE_SETUP.md)
- üåê [–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è Yandex Object Storage](https://cloud.yandex.ru/docs/storage/)
- üí∞ [–¶–µ–Ω—ã –Ω–∞ Object Storage](https://cloud.yandex.ru/prices#storage)
